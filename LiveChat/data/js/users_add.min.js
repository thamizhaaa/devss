function checkUsername(e){e=$("#username").val(),$("#username_ajax_return").html(""),$.ajax({url:applicationPath+"modules/users/ajax/functions.php",type:"POST",data:{action:"checkUsername",username:e},cache:!1,success:function(e){"1"!=e&&($(".rm_ajax_username").html(""),$("#username_ajax_return").html("This username is already registered. Please select a different one."),$("#username").val(""))}})}function checkEmail(e){e=$("#email").val(),$("#email_ajax_return").html(""),$.ajax({url:applicationPath+"modules/users/ajax/functions.php",type:"POST",data:{action:"checkEmail",email:e},cache:!1,success:function(e){"1"!=e&&($(".rm_ajax_email").html(""),$("#email_ajax_return").html("This email is already registered. Please select a different one."),$("#email").val(""))}})}function remove_avatar(){$("#operator_avatar").html('<img id="operator_avatar_img" data-image="" src="'+applicationPath+'/data/config/themes/img/avatars/default.png"/>')}function _(e){return document.getElementById(e)}function uploadFile(){var e,a=_("file").files[0];if(void 0==a)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Please select a file before clicking the upload button.");if(_("error_handling").style.visibility="hidden","image/jpeg"!=a.type&&"image/png"!=a.type)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Only JPG, JPEG or PNG file formats are permitted.");var r=window.URL||window.webkitURL;e=new Image,e.onload=function(){if(this.width>90||this.height>90)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Please select an image file with 90px X 90px dimensions.");document.getElementById("progressBar").style.visibility="visible";var e=new FormData;e.append("type","avatars"),e.append("file",a);var r=new XMLHttpRequest;r.upload.addEventListener("progress",progressHandler,!1),r.addEventListener("load",completeHandler,!1),r.addEventListener("error",errorHandler,!1),r.addEventListener("abort",abortHandler,!1),r.open("POST",applicationPath+"modules/users/ajax/upload_parser.php",!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(e)},e.src=r.createObjectURL(a)}function progressHandler(e){var a=e.loaded/e.total*100;_("progressBar").value=Math.round(a),_("status").innerHTML=Math.round(a)+"% uploaded... please wait"}function completeHandler(e){_("status").innerHTML="";var a=e.target.responseText;$("#selected_avatar").val(a),_("operator_avatar").innerHTML='<img src="'+applicationPath+a+'"/>',_("progressBar").style.visibility="hidden",_("progressBar").value=0}function errorHandler(e){_("status").innerHTML="Upload Failed"}function abortHandler(e){_("status").innerHTML="Upload Aborted"}