function checkUsername(e){e=$("#username").val(),$("#username_ajax_return").html(""),$.ajax({url:applicationPath+"modules/users/ajax/functions.php",type:"POST",data:{action:"checkUsername",username:e},cache:!1,success:function(e){"1"!=e&&$("#username_ajax_return").html("This username is already registered. Please select a different one.")}})}function checkEmail(e){e=$("#email").val(),$("#email_ajax_return").html(""),$.ajax({url:applicationPath+"modules/users/ajax/functions.php",type:"POST",data:{action:"checkEmail",email:e},cache:!1,success:function(e){"1"!=e&&$("#email_ajax_return").html("This email is already registered. Please select a different one.")}})}function remove_avatar(){$("#operator_avatar").html('<img id="operator_avatar_img" data-image="" src="'+applicationPath+'/data/config/themes/img/avatars/default.png"/>'),$("#selected_avatar").val("")}function _(e){return document.getElementById(e)}function uploadFile(){var e,a=_("file").files[0],r=_("user_id").value;if(void 0==a)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Please select a file before clicking the upload button.");if(_("error_handling").style.visibility="hidden","image/jpeg"!=a.type&&"image/png"!=a.type)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Only JPG, JPEG or PNG file formats are permitted.");var t=window.URL||window.webkitURL;e=new Image,e.onload=function(){if(this.width>90||this.height>90)return _("error_handling").style.visibility="visible",void(_("error_handling").innerHTML="Please select an image file with 90px X 90px dimensions.");document.getElementById("progressBar").style.visibility="visible";var e=new FormData;e.append("file",a),e.append("userID",r);var t=new XMLHttpRequest;t.upload.addEventListener("progress",progressHandler,!1),t.addEventListener("load",completeHandler,!1),t.addEventListener("error",errorHandler,!1),t.addEventListener("abort",abortHandler,!1),t.open("POST",applicationPath+"modules/users/ajax/upload_parser.php",!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(e)},e.src=t.createObjectURL(a)}function progressHandler(e){var a=e.loaded/e.total*100;_("progressBar").value=Math.round(a),_("status").innerHTML=Math.round(a)+"% uploaded... please wait"}function completeHandler(e){_("status").innerHTML="";var a=e.target.responseText;$("#selected_avatar").val(a),_("operator_avatar").innerHTML='<img src="'+applicationPath+a+'"/>',_("user-image-lg").src=applicationPath+a,_("user-image-md").src=applicationPath+a,_("user-image-sm").src=applicationPath+a,_("progressBar").style.visibility="hidden",_("progressBar").value=0}function errorHandler(e){_("status").innerHTML="Upload Failed"}function abortHandler(e){_("status").innerHTML="Upload Aborted"}