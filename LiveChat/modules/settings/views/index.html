<img id="loading_gif" src="data/img/loading.gif"/>
<link rel='stylesheet' href='{$data_server}css/widget_customizer.min.css'/>
<script src='{$data_server}js/color_picker/spectrum.js'></script>
<link rel='stylesheet' href='{$data_server}js/color_picker/spectrum.css'/>
<script> var jsThemeConfig = JSON.parse('{$jsonString}');</script>
<script src="{$data_server}/config/themes/js/comb.min.js"></script>

<div class="container" id="container">

    {if $smarty.get.e == ''}

    <div class="col-lg-12">

        <span class="preset_number">Preset:&nbsp;{$smarty.get.p}&nbsp;&nbsp;</span>

        {assign var="prevPreset" value=$smarty.get.p-1}
        {assign var = 'currentPreset' value='?p='|cat:$smarty.get.p}

        {if $smarty.get.p == ''}
        {assign var="nextPreset" value=2}{else}{assign var="nextPreset" value=$smarty.get.p+1}
        {/if}

        {if $smarty.get.p > 1 && $smarty.get.p <= $foundPresets}
        <a id="next_Preset" href="{$smarty.server.REQUEST_URI|replace:$currentPreset:''}?p={$prevPreset}"
           class="link_as_button">
            <icon data-icon="j" class="next_preset"></icon>
        </a>
        {/if}

        {if $smarty.get.p < $foundPresets}
        <a id="next_Preset" href="{$smarty.server.REQUEST_URI|replace:$currentPreset:''}?p={$nextPreset}"
           class="link_as_button">
            <icon data-icon="k" class="prev_preset"></icon>
        </a>
        {/if}

            <form method="post" class="preset_form">
                <button type="submit" name="publish_preset" value="true" class="btn btn-primary">Publish</button>
                <button type="submit" name="add_preset" value="add" class="btn btn-danger">+ New</button>
                <button type="submit" name="restore_preset" value="restore" class="btn btn-info" onclick="return confirm('Restore this preset to default settings?')">Restore Default</button>
            </form>
    </div>

    <br/><br/><br/><br/><br/>

    <div class="col-lg-4" id="theme_holder1"></div>
    <div class="col-lg-4" id="theme_holder2"></div>
    <div class="col-lg-4" id="theme_holder3"></div>


    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

    {/if}
</div>

{literal}
<script>

function loadModules(){var e="",a="",t="";""==editModule&&(e='<div class="editLink">General Widget Design<a href="settings?p={/literal}{$smarty.get.p}{literal}&e=1" style="margin-left:20px">Edit</a></div>',a='<div class="editLink">Conversation Layout Design<a href="settings?p={/literal}{$smarty.get.p}{literal}&e=2" style="margin-left:20px">Edit</a></div>',t='<div class="editLink">Away Layout Design<a href="settings?p={/literal}{$smarty.get.p}{literal}&e=3" style="margin-left:20px">Edit</a></div>');$(".ultimate_chat_holder"),$('*[data-module="2"]');$("#theme_holder1").html(e+mark_up),$("#theme_holder2").html(a+chatMarkup),$("#theme_holder3").html(t+message_init),$(".ultimate_chat_holder").css({display:"block",position:"relative"}),$(".ultimate_chat_btn_wrap").hide(),1==editModule&&"default"==currentTrigger&&($("#ultimate_chat_btn_wrap").contents().appendTo("#button_preview"),$("#ultimate_chat_start_btn").css({top:"17px","margin-top":"-30px"}))}function createClass(e,a){var t=document.createElement("style");t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),(t.sheet||{}).insertRule?t.sheet.insertRule(e+"{"+a+"}",0):(t.styleSheet||t.sheet).addRule(e,a)}function addClass(e,a){for(var t=document.getElementsByClassName(e),s=0,r=t.length;r>s;s++)t[s].className+=" "+a}function removeClass(e,a){for(var t=document.getElementsByClassName(e),s=0,r=t.length;r>s;s++)t[s].className=t[s].className.replace(a,"")}function modifyClass(e,a,t){var s,r=document.getElementsByClassName(e);for(s=0;s<r.length;s++)r[s].setAttribute("style",a+": "+t+";")}function setStyleRule(e,a){var t=document.styleSheets[document.styleSheets.length-1];for(var s in document.styleSheets)if(document.styleSheets.hasOwnProperty(s)&&document.styleSheets[s].href&&document.styleSheets[s].href.indexOf("widget_customizer.css")){t=document.styleSheets[s];break}t.addRule?t.addRule(e,a):t.insertRule&&t.insertRule(e+" { "+a+" }",t.cssRules.length)}function appendClassContent(e,a){for(var t=document.getElementsByClassName(e),s=0,r=t.length;r>s;s++)t[s].innerHTML=a}function buildLayout(e){var a=document.getElementById("ultimate_chat_holder").getAttribute("data-module"),t=$('*[data-module="2"]');if("none"!=jsThemeConfig.headerImageType&&"slideside"==jsThemeConfig.triggerMethod&&(t.find(".ultimate_chat_header_text").css({"margin-top":"-57px"}),t.find(".header_image").css({"margin-top":"-23px"})),console.log(jsThemeConfig),1==e){if("image"==jsThemeConfig.backgroundStyle){addClass("ultimate_chat_holder","ultimate_chat_holder_bg_img");var s=jsThemeConfig.widgetBackgroundFile;modifyClass("ultimate_chat_holder_bg_img","background","url("+s+") repeat center; position:relative"),modifyClass("default_chat_history","background","transparent")}if("image"==jsThemeConfig.headerStyle){"slideside"==jsThemeConfig.triggerMethod?addClass(" ultimate_chat_link_holder_slideside","ultimate_chat_header_bg_img"):addClass("ultimate_chat_header","ultimate_chat_header_bg_img");var r=jsThemeConfig.widgetHeaderFile,l="";"slideside"==jsThemeConfig.triggerMethod&&(l="border-top-left-radius: "+jsThemeConfig.widgetRadius+"; border-top-right-radius: "+jsThemeConfig.widgetRadius+"; border-bottom-left-radius: "+jsThemeConfig.widgetRadius),modifyClass("ultimate_chat_header_bg_img","background","url("+r+") repeat left;"+l)}"none"!=jsThemeConfig.headerImageType&&(t.find(".ultimate_chat_header").addClass("header_tall"),t.find(".ultimate_chat_link_holder_slideside").addClass("header_tall"),t.find(".ultimate_chat_options_li").addClass("options_tall"),void 0!=document.getElementById("header_subtext")&&(document.getElementById("header_subtext").style.position="relative"),"logo"==jsThemeConfig.headerImageType&&(void 0==jsThemeConfig.widgetLogoFile&&(jsThemeConfig.widgetLogoFile=applicationPath+"/data/config/themes/img/logos/Ultimate-Support-Chat-Logo.png"),void 0!=document.getElementById("header_image")&&(document.getElementById("header_image").innerHTML='<img src="'+jsThemeConfig.widgetLogoFile+'"/>')),"operator"==jsThemeConfig.headerImageType&&(o="{/literal}{$smarty.session.user.avatar}{literal}",i="",i=""!=o?dataServer+o:dataServer+"config/themes/img/avatars/default.png",void 0!=document.getElementById("header_image")&&(document.getElementById("header_image").innerHTML='<img src="'+i+'"/>')),addClass(jsThemeConfig.triggerMethod+"_chat_history_holder",jsThemeConfig.triggerMethod+"_chat_history_holder_low"),addClass(jsThemeConfig.triggerMethod+"_chat_history",jsThemeConfig.triggerMethod+"_chat_history_low")),"slideside"!=jsThemeConfig.triggerMethod&&"20px"==jsThemeConfig.widgetRadius&&$(".ultimate_chat_header").css({borderTopLeftRadius:"20px",borderTopRightRadius:"20px"})}if(appendClassContent("a_2","Admin Name"),appendClassContent("a_3","1 minute ago"),appendClassContent("a_4",jsThemeConfig.initMsgModule_2),appendClassContent("u_2","User Name"),appendClassContent("u_3","Just now"),appendClassContent("u_4","Can you help me find the products page?"),addClass("a_reply","theme"+jsThemeConfig.themeSelect),"none"!=jsThemeConfig.adminAvatarSelect&&addClass("a_1","admin_avatar"),2==jsThemeConfig.themeSelect&&setStyleRule(".right_bubble::after",'content: ""; position: absolute; border-style: solid;border-width: 6px 0 6px 29px;border-color: transparent '+jsThemeConfig.adminMessageColor+"; right: -12px; top: 24px;"),addClass("a_content_wrap","right_bubble"),5!=jsThemeConfig.themeSelect&&modifyClass("a_content_wrap","background",jsThemeConfig.adminMessageColor),addClass("a_2","admin_name"),modifyClass("admin_name","color",jsThemeConfig.adminNameColor),addClass("a_3","admin_time"),setStyleRule(".admin_time","color: "+jsThemeConfig.adminTimeColor+" !important"),addClass("a_4","admin_msg right_msg_bubble"),modifyClass("admin_msg","background",jsThemeConfig.adminMessageColor),setStyleRule(".admin_msg","color: "+jsThemeConfig.adminFontColor+" !important"),2==jsThemeConfig.themeSelect&&""==jsThemeConfig.adminNameColor&&""==jsThemeConfig.adminTimeColor&&modifyClass("admin_msg","margin","22px 30% 15px 10px;"),3==jsThemeConfig.themeSelect&&(modifyClass("a_avatar_border","background",jsThemeConfig.adminMessageColor),""==jsThemeConfig.adminNameColor&&$(".admin_time").css({"margin-right":"0px"}),"none"==jsThemeConfig.adminAvatarSelect&&addClass("a_1","admin_avatar_ex")),4==jsThemeConfig.themeSelect&&(setStyleRule(".right_msg_bubble::after",'content: ""; position: absolute; border-style: solid; border-width: 0 10px 10px; border-color: '+jsThemeConfig.adminMessageColor+" transparent; display: block; width: 0; z-index: 1; top: -10px; right: 20px;"),"none"==jsThemeConfig.adminAvatarSelect&&(addClass("a_2","admin_name_ex"),addClass("a_3","admin_time_ex"))),5==jsThemeConfig.themeSelect&&setStyleRule(".admin_msg::after",'border-radius: 20px / 10px;content: ""; display: block; position: absolute;border: 8px solid transparent; bottom: 1px; border-bottom-color: '+jsThemeConfig.adminMessageColor+"; border-radius: 20px / 10px; left: auto;right: -5px;"),""==jsThemeConfig.adminNameColor&&modifyClass("admin_name","display","none"),""==jsThemeConfig.adminTimeColor&&modifyClass("admin_time","display","none"),addClass("u_reply","theme"+jsThemeConfig.themeSelect),"none"!=jsThemeConfig.userAvatarSelect&&addClass("u_1","user_avatar"),2==jsThemeConfig.themeSelect&&setStyleRule(".left_bubble::after",'content: ""; position: absolute; border-style: solid; border-width: 6px 29px 6px 0; ;border-color: transparent '+jsThemeConfig.userMessageColor+"; left: -12px; top: 24px;"),addClass("u_content_wrap","left_bubble"),5!=jsThemeConfig.themeSelect&&modifyClass("u_content_wrap","background",jsThemeConfig.userMessageColor),addClass("u_2","user_name"),modifyClass("user_name","color",jsThemeConfig.userNameColor),addClass("u_3","user_time"),setStyleRule(".user_time","color: "+jsThemeConfig.userTimeColor+" !important"),addClass("u_4","user_msg left_msg_bubble"),modifyClass("user_msg","background",jsThemeConfig.userMessageColor),setStyleRule(".user_msg","color: "+jsThemeConfig.userFontColor+" !important"),2==jsThemeConfig.themeSelect&&""==jsThemeConfig.userNameColor&&""==jsThemeConfig.userTimeColor&&modifyClass("user_msg","margin","22px 30% 15px 10px;"),3==jsThemeConfig.themeSelect&&(modifyClass("u_avatar_border","background",jsThemeConfig.userMessageColor),""==jsThemeConfig.userNameColor&&$(".user_time").css({"margin-left":"0px"}),"none"==jsThemeConfig.userAvatarSelect&&addClass("u_1","user_avatar_ex")),4==jsThemeConfig.themeSelect&&(setStyleRule(".left_msg_bubble::after",'content: ""; position: absolute; border-style: solid; border-width: 0 12px 12px;   border-color: '+jsThemeConfig.userMessageColor+" transparent; display: block; width: 0; z-index: 1; top: -10px; left: 20px;"),"none"==jsThemeConfig.userAvatarSelect&&(addClass("u_2","user_name_ex"),addClass("u_3","user_time_ex"))),5==jsThemeConfig.themeSelect&&setStyleRule(".user_msg::after",'border-radius: 20px / 10px;content: ""; display: block; position: absolute; border: 8px solid transparent; border-bottom-color: '+jsThemeConfig.userMessageColor+"; bottom: 1px; left: -5px;"),""==jsThemeConfig.userNameColor&&modifyClass("user_name","display","none"),""==jsThemeConfig.userTimeColor&&modifyClass("user_time","display","none"),"50%"==jsThemeConfig.avatarRadius&&(addClass("admin_avatar","avatar_round"),addClass("user_avatar","avatar_round"),addClass("avatar_li","avatar_li_round")),"css"==jsThemeConfig.adminAvatarSelect&&("dynamic"==jsThemeConfig.adminAvatarCssContentStyle&&appendClassContent("admin_avatar","A"),"fixed"==jsThemeConfig.adminAvatarCssContentStyle&&appendClassContent("admin_avatar",jsThemeConfig.adminAvatarCssContent),modifyClass("admin_avatar","background-color",jsThemeConfig.adminAvatarColor),addClass("a_1","a_css_text_color"),setStyleRule(".a_css_text_color","color: "+jsThemeConfig.adminAvatarColorText+"; font-size:13px")),"img"==jsThemeConfig.adminAvatarSelect){var o="{/literal}{$smarty.session.user.avatar}{literal}",i="";i=""!=o?dataServer+o:dataServer+"config/themes/img/avatars/default.png",modifyClass("admin_avatar","background-color","transparent"),appendClassContent("a_1",'<img src="'+i+'"/>')}"css"==jsThemeConfig.userAvatarSelect&&("dynamic"==jsThemeConfig.userAvatarCssContentStyle&&appendClassContent("user_avatar","U"),"fixed"==jsThemeConfig.userAvatarCssContentStyle&&appendClassContent("user_avatar",jsThemeConfig.userAvatarCssContent),modifyClass("user_avatar","background-color",jsThemeConfig.userAvatarColor),addClass("u_1","u_css_text_color"),setStyleRule(".u_css_text_color","color: "+jsThemeConfig.userAvatarColorText+"; font-size:13px")),"img"==jsThemeConfig.userAvatarSelect&&($("#avatar_preview_wrap").show(),modifyClass("user_avatar","background-color","transparent"),"3"!=a&&selectAvatarSet("{/literal}{$smarty.post.userAvatarSet}{literal}"),"1"==jsThemeConfig.requireAvatar&&"1"==a&&(document.getElementById("user_avatar_wrapper").style.display="block",$("#avatar_holder").addClass("avatar_m1_customizer"),showAvatarSelectCustomizer()));var n=document.getElementById("username"),d=document.getElementById("useremail");null!=n&&(n.style.background=jsThemeConfig.textarea1BackgroundColor,n.style.color=jsThemeConfig.textarea1FontColor),null!=d&&(d.style.background=jsThemeConfig.textarea1BackgroundColor,d.style.color=jsThemeConfig.textarea1FontColor),jsThemeConfig.textarea1PlaceholderColor&&(("Chrome"==browser||"Safari"==browser||"Opera"==browser)&&setStyleRule(".ultimate_chat_input_m1::-webkit-input-placeholder","color:"+jsThemeConfig.textarea1PlaceholderColor),"Firefox"==browser&&(setStyleRule(".ultimate_chat_input_m1:-moz-placeholder","color:"+jsThemeConfig.textarea1PlaceholderColor),setStyleRule(".ultimate_chat_input_m1::-moz-placeholder","color:"+jsThemeConfig.textarea1PlaceholderColor)),"Microsoft Internet Explorer"==browser&&setStyleRule(".ultimate_chat_input_m1:-ms-input-placeholder","color:"+jsThemeConfig.textarea1PlaceholderColor)),jsThemeConfig.textarea2PlaceholderColor&&(("Chrome"==browser||"Safari"==browser||"Opera"==browser)&&setStyleRule("::-webkit-input-placeholder","color:"+jsThemeConfig.textarea2PlaceholderColor),"Firefox"==browser&&(setStyleRule(":-moz-placeholder","color:"+jsThemeConfig.textarea2PlaceholderColor),setStyleRule("::-moz-placeholder","color:"+jsThemeConfig.textarea2PlaceholderColor)),"Microsoft Internet Explorer"==browser&&setStyleRule(":-ms-input-placeholder","color:"+jsThemeConfig.textarea2PlaceholderColor));var p=document.getElementById("contact_name"),u=document.getElementById("contact_email"),m=document.getElementById("contact_message");null!=p&&(p.style.background=jsThemeConfig.textarea3BackgroundColor,p.style.color=jsThemeConfig.textarea3FontColor),null!=u&&(u.style.background=jsThemeConfig.textarea3BackgroundColor,u.style.color=jsThemeConfig.textarea3FontColor),null!=m&&(m.style.background=jsThemeConfig.textarea3BackgroundColor,m.style.color=jsThemeConfig.textarea3FontColor),jsThemeConfig.textarea3PlaceholderColor&&(("Chrome"==browser||"Safari"==browser||"Opera"==browser)&&setStyleRule(".ultimate_chat_input::-webkit-input-placeholder","color:"+jsThemeConfig.textarea3PlaceholderColor),"Firefox"==browser&&(setStyleRule(".ultimate_chat_input:-moz-placeholder","color:"+jsThemeConfig.textarea3PlaceholderColor),setStyleRule(".ultimate_chat_input::-moz-placeholder","color:"+jsThemeConfig.textarea3PlaceholderColor)),"Microsoft Internet Explorer"==browser&&setStyleRule(".ultimate_chat_input:-ms-input-placeholder","color:"+jsThemeConfig.textarea3PlaceholderColor))}function edit(e){var a="";editModule=e;var t='<div class="customize_module">Customize this module</div>',s='<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="margin-bottom: 20px;" id="theme_holder'+e+'"></div>',r='<div class="col-lg-6 col-md-6 col sm-12 col-xs-12" style="margin-bottom: 20px;" id="customizer"></div>',l='<div class=" h-scroll"><form method="post" id="customizer_form">';if(1==e&&(a='<h2 style="font-size:20px;">GLOBAL SETTINGS:</h2><label class="">Trigger method</label><input type="radio" name="triggerMethod" value="default" onclick="checkTrigger(this.value)"{/literal}{if $smarty.post.triggerMethod== "default"}checked{/if}{literal}>&nbsp;Button&nbsp;&nbsp;<input type="radio" name="triggerMethod" value="slideup" onclick="checkTrigger(this.value)"{/literal}{if $smarty.post.triggerMethod== "slideup"}checked{/if}{literal}>&nbsp;Slide-up&nbsp;&nbsp;<input type="radio" name="triggerMethod" value="slideside" onclick="checkTrigger(this.value)"{/literal}{if $smarty.post.triggerMethod== "slideside"}checked{/if}{literal}>&nbsp;Slide-side<div id="widget_button_options" {/literal}{if $smarty.post.triggerMethod != "default"}style="display:none"{/if}{literal}><label class="">Widget button color</label><span class="">Background&nbsp;&nbsp;</span><input type="text" name="widgetButtonColor" id="widgetButtonColor" value="{/literal}{$smarty.post.widgetButtonColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Gradient&nbsp;</span><input type="text" name="widgetButtonColorGradient" id="widgetButtonColorGradient" value="{/literal}{$smarty.post.widgetButtonColorGradient}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Icon&nbsp;</span><input type="text" name="widgetButtonColorIcon" id="widgetButtonColorIcon" value="{/literal}{$smarty.post.widgetButtonColorIcon}{literal}" style="display: none;"><br/><br/><br/><span class="">&nbsp;&nbsp;Preview&nbsp;</span><div style="display:inline-block" id="button_preview"></div></div><label class="">Widget radius</label><input type="radio" name="widgetRadius" value="0px" {/literal}{if $smarty.post.widgetRadius == "0px"}checked{/if}{literal}>&nbsp;Square&nbsp;&nbsp;<input type="radio" name="widgetRadius" value="20px" {/literal}{if $smarty.post.widgetRadius == "20px"}checked{/if}{literal}>&nbsp;Round<label class="">Widget border color</label><input type="text" name="widgetBorder" id="widgetBorder" value="{/literal}{$smarty.post.widgetBorder}{literal}" style="display: none;"><label class="">Widget shadow</label><input type="radio" name="widgetShadow" value="true" {/literal}{if $smarty.post.widgetShadow== "true"}checked{/if}{literal}>&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="widgetShadow" value="false" {/literal}{if $smarty.post.widgetShadow== "false"}checked{/if}{literal}>&nbsp;No<label class="">Background</label><input type="radio" name="backgroundStyle" value="image" onclick="backgroundStyleSelect(this.value)"{/literal}{if $smarty.post.backgroundStyle== "image"}checked{/if}{literal}>&nbsp;Image&nbsp;&nbsp;<input type="radio" name="backgroundStyle" value="color" onclick="backgroundStyleSelect(this.value)"{/literal}{if $smarty.post.backgroundStyle== "color"}checked{/if}{literal}>&nbsp;Color<div id="background_image_wrap" style="display:none"><br/><div id="backgrounds_holder" style="display:inline-block"><ul id="backgrounds_list"></ul></div><div class="ajax_uploader"><p>Upload a background image</p><input type="file" name="file" id="file_backgrounds"><p class="help-block">JPG or PNG (Max: 600px by 600px)</p><button type="button" value="Upload File" class="btn btn-primary" onclick="uploadFile(\'backgrounds\')">Upload</button><p id="error_handling_backgrounds" style="color:red; visibility:hidden">&nbsp;</p><progress id="progressBar_backgrounds" value="0" max="100" style="width:300px; display:none"></progress><p id="loaded_n_total_backgrounds" style="display:none"></p><p id="status_backgrounds" style="display:none"></p></div></div><div id="background_color_wrap" style="display:none"><br/><input type="text" name="backgroundColor" id="backgroundColor" value="{/literal}{$smarty.post.backgroundColor}{literal}" style="display: none;"></div><h2 style="font-size:20px;">HEADER SETTINGS:</h2><label class="">Header background</label><input type="radio" name="headerStyle" value="image" onclick="headerStyleSelect(this.value)"{/literal}{if $smarty.post.headerStyle== "image"}checked{/if}{literal}>&nbsp;Image&nbsp;&nbsp;<input type="radio" name="headerStyle" value="color" onclick="headerStyleSelect(this.value)"{/literal}{if $smarty.post.headerStyle== "color"}checked{/if}{literal}>&nbsp;Color<div id="header_image_wrap" style="display:none"><br/><div id="headers_holder" style="display:inline-block"><ul id="headers_list"></ul></div><div class="ajax_uploader"><p>Upload a header image</p><input type="file" name="file" id="file_headers"><p class="help-block">JPG or PNG (Max: 600px by 60px)</p><button type="button" value="Upload File" class="btn btn-primary" onclick="uploadFile(\'headers\')">Upload</button><p id="error_handling_headers" style="color:red; visibility:hidden">&nbsp;</p><progress id="progressBar_headers" value="0" max="100" style="width:300px; display:none"></progress><p id="loaded_n_total_headers" style="display:none"></p><p id="status_headers" style="display:none"></p></div></div><div id="header_color_wrap" style="display:none"><br/><input type="text" name="headerColor" id="headerColor" value="{/literal}{$smarty.post.headerColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Gradient&nbsp;</span><input type="text" name="headerGradient" id="headerGradient" value="{/literal}{$smarty.post.headerGradient}{literal}" style="display: none;"></div><br/><h2 style="font-size:20px;">MODULE SETTINGS:</h2><label class="">Header Title</label><input type="text" class="text_wide" name="headerTextM1" id="headerTextM1" value="{/literal}{$smarty.post.headerTextM1}{literal}"><input type="text" name="headerTextColor" class="headerTextColor" value="{/literal}{$smarty.post.headerTextColor}{literal}" style="display: none;"><label class="">Initial message</label><textarea name="initMsgModule_1" id="initMsgModule_1" style="width:95%; max-width:400px">{/literal}{$smarty.post.initMsgModule_1}{literal}</textarea><span class="">&nbsp;&nbsp;Color&nbsp;</span><input type="text" name="initMsgColor" class="initMsgColor" value="{/literal}{$smarty.post.initMsgColor}{literal}" style="display: none;"><label class="">Require Avatar</label><input type="radio" name="requireAvatar" value="1" onclick="checkOverrideM1(this.value)" {/literal}{if $smarty.post.requireAvatar== "1"}checked{/if}{literal}>&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="requireAvatar" value="0" onclick="checkOverrideM1(this.value)" {/literal}{if $smarty.post.requireAvatar== "0"}checked{/if}{literal}>&nbsp;No<label class="">Select User Avatar Set</label><input type="radio" name="userAvatarSet" value="set_1" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_1"}checked{/if}{literal}>&nbsp;Set 1&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_2" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_2"}checked{/if}{literal}>&nbsp;Set 2&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_3" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_3"}checked{/if}{literal}>&nbsp;Set 3&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_4" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_4"}checked{/if}{literal}>&nbsp;Set 4&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_5" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_5"}checked{/if}{literal}>&nbsp;Set 5&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_6" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_6"}checked{/if}{literal}>&nbsp;Set 6&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_7" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_7"}checked{/if}{literal}>&nbsp;Set 7<label class="">Avatar radius</label><input type="radio" name="avatarRadius" value="3px" {/literal}{if $smarty.post.avatarRadius == "3px"}checked{/if}{literal}>&nbsp;Square&nbsp;&nbsp;<input type="radio" name="avatarRadius" value="50%" {/literal}{if $smarty.post.avatarRadius == "50%"}checked{/if}{literal}>&nbsp;Round<label class="">Require Name</label><input type="radio" name="requireName" value="1" {/literal}{if $smarty.post.requireName== "1"}checked{/if}{literal}>&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="requireName" value="0" {/literal}{if $smarty.post.requireName== "0"}checked{/if}{literal}>&nbsp;No<label class="">Require Email</label><input type="radio" name="requireEmail" value="1" {/literal}{if $smarty.post.requireEmail== "1"}checked{/if}{literal}>&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="requireEmail" value="0" {/literal}{if $smarty.post.requireEmail== "0"}checked{/if}{literal}>&nbsp;No<label class="">Button Background</label><input type="text" name="chatBtnMsgBackgroundColor" id="chatBtnMsgBackgroundColor" value="{/literal}{$smarty.post.chatBtnMsgBackgroundColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Gradient&nbsp;</span><input type="text" name="chatBtnMsgBackgroundGradient" id="chatBtnMsgBackgroundGradient" value="{/literal}{$smarty.post.chatBtnMsgBackgroundGradient}{literal}" style="display: none;"><label class="">Button text</label><input type="text" name="chatBtnMsg" id="chatBtnMsg" class="text_wide" value="{/literal}{$smarty.post.chatBtnMsg}{literal}"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="chatBtnMsgFontColor" id="chatBtnMsgFontColor" value="{/literal}{$smarty.post.chatBtnMsgFontColor}{literal}" style="display: none;"><label class="">Text Fields Design</label><span class="">&nbsp;&nbsp;Background&nbsp;</span><input type="text" name="textarea1BackgroundColor" id="textarea1BackgroundColor" value="{/literal}{$smarty.post.textarea1BackgroundColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Placeholder&nbsp;</span><input type="text" name="textarea1PlaceholderColor" id="textarea1PlaceholderColor" value="{/literal}{$smarty.post.textarea1PlaceholderColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="textarea1FontColor" id="textarea1FontColor" value="{/literal}{$smarty.post.textarea1FontColor}{literal}" style="display: none;"><br/>'),2==e){var o,i="",n="",d="";"dynamic"==jsThemeConfig.adminAvatarCssContentStyle&&(n="disabled"),"dynamic"==jsThemeConfig.userAvatarCssContentStyle&&(d="disabled"),"true"==jsThemeConfig.userAvatarSelectChoice?o='<label class="">Select an Avatar Set</label>':(o='<label class="">Select a fixed Avatar</label>',i='<input type="radio" name="userAvatarSet" value="set_0" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_0"}checked{/if}{literal}>&nbsp;Default&nbsp;&nbsp;'),a='<label class="">Header image</label><input type="radio" name="headerImageType" value="none" {/literal}{if $smarty.post.headerImageType== "none"}checked{/if}{literal}>&nbsp;None&nbsp;&nbsp;<input type="radio" name="headerImageType" value="operator" {/literal}{if $smarty.post.headerImageType== "operator"}checked{/if}{literal}>&nbsp;Operator&nbsp;&nbsp;<input type="radio" name="headerImageType" value="logo" onclick="headerImageTypeSelect(this.value)"{/literal}{if $smarty.post.headerImageType== "logo"}checked{/if}{literal}>&nbsp;logo<div id="logo_image_wrap" style="display:none"><br/><div id="logos_holder" style="display:inline-block"><ul id="logos_list"></ul></div><div class="ajax_uploader"><p>Upload a logo image</p><input type="file" name="file" id="file_logos"><p class="help-block">JPG or PNG (Max: 40px by 40px)</p><button type="button" value="Upload File" class="btn btn-primary" onclick="uploadFile(\'logos\')">Upload</button><p id="error_handling_logos" style="color:red; visibility:hidden">&nbsp;</p><progress id="progressBar_logos" value="0" max="100" style="width:300px; display:none"></progress><p id="loaded_n_total_logos" style="display:none"></p><p id="status_logos" style="display:none"></p></div></div><label class="">Header Title</label><input type="text" class="text_wide" name="headerTextM2" id="headerTextM2" value="{/literal}{$smarty.post.headerTextM2}{literal}"><input type="text" name="headerTextColor" class="headerTextColor" value="{/literal}{$smarty.post.headerTextColor}{literal}" style="display: none;"><label class="">Select Conversation Layout</label><input type="radio" name="themeSelect" value="1" {/literal}{if $smarty.post.themeSelect== "1"}checked{/if}{literal}>&nbsp;1&nbsp;&nbsp;<input type="radio" name="themeSelect" value="2" {/literal}{if $smarty.post.themeSelect== "2"}checked{/if}{literal}>&nbsp;2&nbsp;&nbsp;<input type="radio" name="themeSelect" value="3" {/literal}{if $smarty.post.themeSelect== "3"}checked{/if}{literal}>&nbsp;3&nbsp;&nbsp;<input type="radio" name="themeSelect" value="4" {/literal}{if $smarty.post.themeSelect== "4"}checked{/if}{literal}>&nbsp;4&nbsp;&nbsp;<input type="radio" name="themeSelect" value="5" {/literal}{if $smarty.post.themeSelect== "5"}checked{/if}{literal}>&nbsp;5<label class="">Operator Avatar</label><input type="radio" name="adminAvatarSelect" value="none" {/literal}{if $smarty.post.adminAvatarSelect == "none"}checked{/if}{literal}>&nbsp;None&nbsp;&nbsp;<input type="radio" name="adminAvatarSelect" value="img" {/literal}{if $smarty.post.adminAvatarSelect == "img"}checked{/if}{literal}>&nbsp;Image&nbsp;&nbsp;<input type="radio" name="adminAvatarSelect" value="css" onclick="operatorAvatarCssSelect(this.value)" {/literal}{if $smarty.post.adminAvatarSelect == "css"}checked{/if}{literal}>&nbsp;Color<div id="operator_avatar_css_wrap" style="display:none"><label class="">Inner text</label><input type="radio" name="adminAvatarCssContentStyle" value="dynamic" {/literal}{if $smarty.post.adminAvatarCssContentStyle == "dynamic"}checked{/if}{literal}>&nbsp;Operators\'s initial (dynamic)&nbsp;&nbsp;<input type="radio" name="adminAvatarCssContentStyle" value="fixed" {/literal}{if $smarty.post.adminAvatarCssContentStyle == "fixed"}checked{/if}{literal}>&nbsp;Fixed: &nbsp;&nbsp;<input type="text" style="width:60px" name="adminAvatarCssContent" id="adminAvatarCssContent" maxlength="3" value="{/literal}{$smarty.post.adminAvatarCssContent}{literal}" '+n+'><br/><br/><span class="">&nbsp;&nbsp;Background&nbsp;</span><input type="text" name="adminAvatarColor" id="adminAvatarColor" value="{/literal}{$smarty.post.adminAvatarColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="adminAvatarColorText" id="adminAvatarColorText" value="{/literal}{$smarty.post.adminAvatarColorText}{literal}" style="display: none;"><br/><br/></div><label class="">User Avatar</label><input type="radio" name="userAvatarSelect" value="none" onclick="checkOverrideM2(this.value)" {/literal}{if $smarty.post.userAvatarSelect == "none"}checked{/if}{literal}>&nbsp;None&nbsp;&nbsp;<input type="radio" name="userAvatarSelect" value="img" onclick="checkOverrideM2(this.value)" {/literal}{if $smarty.post.userAvatarSelect == "img"}checked{/if}{literal}>&nbsp;Image&nbsp;&nbsp;<input type="radio" name="userAvatarSelect" value="css" onclick="checkOverrideM2(this.value); userAvatarCssSelect(this.value);"{/literal}{if $smarty.post.userAvatarSelect == "css"}checked{/if}{literal}>&nbsp;Color<div id="user_avatar_css_wrap" style="display:none"><label class="">Inner text</label><input type="radio" name="userAvatarCssContentStyle" value="dynamic" {/literal}{if $smarty.post.userAvatarCssContentStyle == "dynamic"}checked{/if}{literal}>&nbsp;User\'s initial (dynamic)&nbsp;&nbsp;<input type="radio" name="userAvatarCssContentStyle" value="fixed" {/literal}{if $smarty.post.userAvatarCssContentStyle == "fixed"}checked{/if}{literal}>&nbsp;Fixed: &nbsp;&nbsp;<input type="text" name="userAvatarCssContent" id="userAvatarCssContent" maxlength="3" value="{/literal}{$smarty.post.userAvatarCssContent}{literal}" '+d+'><br/><br/><span class="">&nbsp;&nbsp;Background&nbsp;</span><input type="text" name="userAvatarColor" id="userAvatarColor" value="{/literal}{$smarty.post.userAvatarColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="userAvatarColorText" id="userAvatarColorText" value="{/literal}{$smarty.post.userAvatarColorText}{literal}" style="display: none;"><br/><br/></div><div id="avatar_preview_wrap" style="display:none"><label class="">Allow users to select an Avatar</label><input type="radio" name="userAvatarSelectChoice" value="true" onclick="checkOverrideM2(this.value)" {/literal}{if $smarty.post.userAvatarSelectChoice == "true"}checked{/if}{literal}>&nbsp;Yes&nbsp;&nbsp;<input type="radio" name="userAvatarSelectChoice" value="fixed" onclick="checkOverrideM2(this.value)" {/literal}{if $smarty.post.userAvatarSelectChoice == "fixed"}checked{/if}{literal}>&nbsp;No. Use a fixed avatar&nbsp;&nbsp;'+o+i+'<input type="radio" name="userAvatarSet" value="set_1" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_1"}checked{/if}{literal}>&nbsp;Set 1&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_2" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_2"}checked{/if}{literal}>&nbsp;Set 2&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_3" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_3"}checked{/if}{literal}>&nbsp;Set 3&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_4" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_4"}checked{/if}{literal}>&nbsp;Set 4&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_5" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_5"}checked{/if}{literal}>&nbsp;Set 5&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_6" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_6"}checked{/if}{literal}>&nbsp;Set 6&nbsp;&nbsp;<input type="radio" name="userAvatarSet" value="set_7" onclick="selectAvatarSet(this.value)" {/literal}{if $smarty.post.userAvatarSet == "set_7"}checked{/if}{literal}>&nbsp;Set 7<label style="">Avatar Preview</label><div id="user_avatar_wrapper"><div id="avatar_holder"><ul id="avatar_list"></ul></div></div><br/></div><div id="avatar_radius_wrap" style="display:none"><label class="">Avatar radius</label><input type="radio" name="avatarRadius" value="3px" {/literal}{if $smarty.post.avatarRadius == "3px"}checked{/if}{literal}>&nbsp;Square&nbsp;&nbsp;<input type="radio" name="avatarRadius" value="50%" {/literal}{if $smarty.post.avatarRadius == "50%"}checked{/if}{literal}>&nbsp;Round</div><label class="">Initial Admin message</label><textarea name="initMsgModule_2" id="initMsgModule_2" style="width:95%; max-width:400px">{/literal}{$smarty.post.initMsgModule_2}{literal}</textarea><label class="">Admin message colors</label><span class="">&nbsp;&nbsp;Name&nbsp;</span><input type="text" name="adminNameColor" id="adminNameColor" value="{/literal}{$smarty.post.adminNameColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Time&nbsp;</span><input type="text" name="adminTimeColor" id="adminTimeColor" value="{/literal}{$smarty.post.adminTimeColor}{literal}" style="display: none;"><br/><br/><span class="">Background&nbsp;</span><input type="text" name="adminMessageColor" id="adminMessageColor" value="{/literal}{$smarty.post.adminMessageColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="adminFontColor" id="adminFontColor" value="{/literal}{$smarty.post.adminFontColor}{literal}" style="display: none;"><label class="">Admin message audio</label><div id="admin_message_audio_wrap"><div class="options_container"><select id="adminMessageAudio" name="adminMessageAudio"><option value="1" '+("1"==jsThemeConfig.adminMessageAudio?"selected":"")+'>Default</option><option value="0" '+("0"==jsThemeConfig.adminMessageAudio?"selected":"")+'>0</option><option value="2" '+("2"==jsThemeConfig.adminMessageAudio?"selected":"")+'>2</option><option value="3" '+("3"==jsThemeConfig.adminMessageAudio?"selected":"")+'>3</option><option value="4" '+("4"==jsThemeConfig.adminMessageAudio?"selected":"")+'>4</option><option value="5" '+("5"==jsThemeConfig.adminMessageAudio?"selected":"")+'>5</option><option value="6" '+("6"==jsThemeConfig.adminMessageAudio?"selected":"")+'>6</option><option value="7" '+("7"==jsThemeConfig.adminMessageAudio?"selected":"")+'>7</option><option value="8" '+("8"==jsThemeConfig.adminMessageAudio?"selected":"")+'>8</option><option value="9" '+("9"==jsThemeConfig.adminMessageAudio?"selected":"")+'>9</option></select></div><br/><audio id="admin_audio_player"></audio><div id="admin_play_pause"><icon class="play_pause_icon fa fa-play"></icon></span></div><p class="btn-primary audio_submit_changes_btn pointer">Choose</p><br/></div><br/><label class="">User message colors</label><span class="">&nbsp;&nbsp;Name&nbsp;</span><input type="text" name="userNameColor" id="userNameColor" value="{/literal}{$smarty.post.userNameColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Time&nbsp;</span><input type="text" name="userTimeColor" id="userTimeColor" value="{/literal}{$smarty.post.userTimeColor}{literal}" style="display: none;"><br/><br/><span class="">Background&nbsp;</span><input type="text" name="userMessageColor" id="userMessageColor" value="{/literal}{$smarty.post.userMessageColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="userFontColor" id="userFontColor" value="{/literal}{$smarty.post.userFontColor}{literal}" style="display: none;"><label class="">Typing area design</label><span class="">&nbsp;&nbsp;Background&nbsp;</span><input type="text" name="textarea2BackgroundColor" id="textarea2BackgroundColor" value="{/literal}{$smarty.post.textarea2BackgroundColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Placeholder&nbsp;</span><input type="text" name="textarea2PlaceholderColor" id="textarea2PlaceholderColor" value="{/literal}{$smarty.post.textarea2PlaceholderColor}{literal}" style="display: none;"><br/><br/><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="textarea2FontColor" id="textarea2FontColor" value="{/literal}{$smarty.post.textarea2FontColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Button&nbsp;</span><input type="text" name="textarea2BtnColor" id="textarea2BtnColor" value="{/literal}{$smarty.post.textarea2BtnColor}{literal}" style="display: none;"><label class="">User message audio</label><div id="user_message_audio_wrap"><div class="options_container"><select id="userMessageAudio" name="userMessageAudio"><option value="0" '+("0"==jsThemeConfig.userMessageAudio?"selected":"")+'>Default</option><option value="1" '+("1"==jsThemeConfig.userMessageAudio?"selected":"")+'>1</option><option value="2" '+("2"==jsThemeConfig.userMessageAudio?"selected":"")+'>2</option><option value="3" '+("3"==jsThemeConfig.userMessageAudio?"selected":"")+'>3</option><option value="4" '+("4"==jsThemeConfig.userMessageAudio?"selected":"")+'>4</option><option value="5" '+("5"==jsThemeConfig.userMessageAudio?"selected":"")+'>5</option><option value="6" '+("6"==jsThemeConfig.userMessageAudio?"selected":"")+'>6</option><option value="7" '+("7"==jsThemeConfig.userMessageAudio?"selected":"")+'>7</option><option value="8" '+("8"==jsThemeConfig.userMessageAudio?"selected":"")+'>8</option><option value="9" '+("9"==jsThemeConfig.userMessageAudio?"selected":"")+'>9</option></select></div><br/><audio id="user_audio_player"></audio><div id="user_play_pause"><icon class="play_pause_icon fa fa-play"></icon></div><p class="btn-primary audio_submit_changes_btn pointer">Choose</p><br/></div>';
}3==e&&(a='<label class="">Header Title</label><input type="text" name="headerTextM3" id="headerTextM3" value="{/literal}{$smarty.post.headerTextM3}{literal}"><label class="">Text Fields Design</label><span class="">Background&nbsp;</span><input type="text" name="textarea3BackgroundColor" id="textarea3BackgroundColor" value="{/literal}{$smarty.post.textarea3BackgroundColor}{literal}" style="display: none;"><span class="">Placeholder&nbsp;</span><input type="text" name="textarea3PlaceholderColor" id="textarea3PlaceholderColor" value="{/literal}{$smarty.post.textarea3PlaceholderColor}{literal}" style="display: none;"><span class="">Text&nbsp;</span><input type="text" name="textarea3FontColor" id="textarea3FontColor" value="{/literal}{$smarty.post.textarea3FontColor}{literal}" style="display: none;"><label class="">Button Design</label><span class="">&nbsp;&nbsp;Background&nbsp;</span><input type="text" name="sendMailBtnBackgroundColor" id="sendMailBtnBackgroundColor" value="{/literal}{$smarty.post.sendMailBtnBackgroundColor}{literal}" style="display: none;"><span class="">&nbsp;&nbsp;Gradient&nbsp;</span><input type="text" name="sendMailBtnBackgroundGradient" id="sendMailBtnBackgroundGradient" value="{/literal}{$smarty.post.sendMailBtnBackgroundGradient}{literal}" style="display: none;"><br/><br/><input type="text" class="text_wide" name="sendMailBtn" id="sendMailBtn" value="{/literal}{$smarty.post.sendMailBtn}{literal}"><span class="">&nbsp;&nbsp;Text&nbsp;</span><input type="text" name="sendMailBtnFontColor" id="sendMailBtnFontColor" value="{/literal}{$smarty.post.sendMailBtnFontColor}{literal}" style="display: none;"><br/>');var p='<input type="hidden" name="editModule" value="'+e+'"/><input type="hidden" name="submit_options"/><br/><br/></form><br/></div>';'<img id="loading_gif" src="'+applicationPath+'data/img/loading.gif" style="width:60px; position: relative; top:150px; left:150px; display:none"/>';$("#container").html(t+s+r),$("#customizer").html(l+a+p),loadModules(),buildLayout(!0,!1),"1"==editModule&&(backgroundStyleSelect(jsThemeConfig.backgroundStyle),headerStyleSelect(jsThemeConfig.headerStyle)),"2"==editModule&&headerImageTypeSelect(jsThemeConfig.headerImageType),"1"==jsThemeConfig.requireAvatar&&"1"==editModule&&(document.getElementById("user_avatar_wrapper").style.display="block",$("#avatar_holder").addClass("avatar_m1_customizer"),showAvatarSelectCustomizer()),$(function(){var e=$("img"),a=e.length,t=function(){a--,a||restore()};e.each(function(){this.complete?t():$(this).load(t).error(t)})}),$("#widgetButtonColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#widgetButtonColorGradient").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#widgetButtonColorIcon").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#backgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#headerColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#headerGradient").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#widgetBorder").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$(".initMsgColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$(".headerTextColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#headerSubtextColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#adminAvatarColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#adminAvatarColorText").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#userAvatarColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#userAvatarColorText").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#adminNameColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#adminTimeColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#adminMessageColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#adminFontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#userNameColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#userTimeColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#userMessageColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#userFontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#chatBtnMsgBackgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#chatBtnMsgBackgroundGradient").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#chatBtnMsgFontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#textarea1BackgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#textarea1FontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea1PlaceholderColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea2BackgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#textarea2FontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea2PlaceholderColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea2BtnColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea3BackgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#textarea3FontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#textarea3PlaceholderColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0}),$("#sendMailBtnBackgroundColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#sendMailBtnBackgroundGradient").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0,allowEmpty:!0}),$("#sendMailBtnFontColor").spectrum({preferredFormat:"hex",showInput:!0,showInitial:!0});var u=$("#customizer_form");u.find("input").not("[name=file], [name=headerTextM1], [name=headerTextM2], [name=headerTextM3], [name=headerSubtext], [name=initMsgModule_1], [name=initMsgModule_2], [name=chatBtnMsg], [name=requireAvatar], [name=userAvatarSelectChoice], [name=userAvatarSelect], [name=userAvatarSet], [name=headerStyle], [name=backgroundStyle], [name=adminAvatarCssContent], [name=userAvatarCssContent], [name=sendMailBtn]").click(function(){submitChanges(this.name)}),u.find("[name=headerTextM1], [name=headerTextM2], [name=headerTextM3], [name=headerSubtext], [name=initMsgModule_1], [name=initMsgModule_2], [name=chatBtnMsg], [name=adminAvatarCssContent], [name=userAvatarCssContent], [name=sendMailBtn]").blur(function(){submitChanges(this.name)}),$(".audio_submit_changes_btn").click(function(){submitChanges()}),$(".sp-choose").click(function(){submitChanges(this.name)})}function selectAvatarSet(e){var a="{/literal}{$smarty.get.p}{literal}",t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(console.log(t.responseText),jsonData=JSON.parse(t.responseText),showAvatarSelect(e,jsonData))},t.open("POST",applicationPath+"modules/settings/ajax/avatar_select.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send("setName="+e+"&selectedPreset="+a)}function showAvatarSelect(e,a){for(var t=document.querySelectorAll("#avatar_holder ul li"),s=0;i=t[s];s++)i.parentNode.removeChild(i);for(var r=dataServer+"config/themes/img/avatars/"+e+"/",l=document.getElementById("avatar_list"),o=0;o<a.length;o++){var i=document.createElement("li"),n=new Image;n.src=r+a[o],i.appendChild(n),l.appendChild(i)}"fixed"==jsThemeConfig.userAvatarSelectChoice&&($("#avatar_holder > ul > li").css("cursor","pointer"),$("#avatar_holder > ul > li img").click(function(){$("<input>").attr({type:"hidden",name:"userAvatarFile",value:this.src}).appendTo("#customizer_form"),submitChanges()})),"fixed"==jsThemeConfig.userAvatarSelectChoice?appendClassContent("u_1",'<img src="'+jsThemeConfig.userAvatarFile+'"/>'):appendClassContent("u_1",'<img src="'+r+a[0]+'"/>')}function displayImageSelect(e,a){for(var t=document.querySelectorAll("#"+e+"_holder ul li"),s=0;o=t[s];s++)o.parentNode.removeChild(o);for(var r=document.getElementById(e+"_list"),l=0;l<a.length;l++){var o=document.createElement("li"),i=new Image;i.src=a[l],o.appendChild(i),r.appendChild(o)}$("#"+e+"_list > li img").click(function(){var a;"backgrounds"==e&&(a="Background"),"headers"==e&&(a="Header"),"logos"==e&&(a="Logo"),"footers"==e&&(a="Footer"),$("<input>").attr({type:"hidden",name:"widget"+a+"File",value:this.src}).appendTo("#customizer_form"),submitChanges()})}function showAvatarSelectCustomizer(){function e(){var e=document.getElementById("avatar_holder").getElementsByTagName("li");e[0].parentNode.appendChild(e[0])}for(var a=dataServer+"config/themes/img/avatars/"+jsThemeConfig.userAvatarSet+"/",t=document.getElementById("avatar_list"),s=0;s<jsThemeConfig.avatar_set_files.length;s++){var r=document.createElement("li"),l=new Image;l.src=a+jsThemeConfig.avatar_set_files[s],r.appendChild(l),t.appendChild(r)}var o=document.querySelectorAll("#avatar_holder ul li").length,i=document.querySelectorAll("#avatar_holder ul li"),n=i[0].clientWidth,d=i[0].clientHeight;document.getElementById("avatar_holder").style.width=n,document.getElementById("avatar_holder").style.height=d,document.getElementById("control_prev").onclick=function(){for(var a=0;o-1>a;a++)e()},document.getElementById("control_next").onclick=function(){e()}}function checkTrigger(e){"default"==e?($("#widget_button_options").show("slow"),$("#ultimate_chat_btn_wrap").contents().appendTo("#button_preview"),$("#ultimate_chat_start_btn").css({top:"17px","margin-top":"-30px"})):$("#widget_button_options").hide("slow")}function backgroundStyleSelect(e){"image"==e?($("#background_image_wrap").show("slow"),$("#background_color_wrap").hide("slow"),loadImages("backgrounds")):($("#background_color_wrap").show("slow"),$("#background_image_wrap").hide("slow"))}function headerStyleSelect(e){"image"==e?($("#header_image_wrap").show("slow"),$("#header_color_wrap").hide("slow"),loadImages("headers")):($("#header_color_wrap").show("slow"),$("#header_image_wrap").hide("slow"))}function headerImageTypeSelect(e){"logo"==e?($("#logo_image_wrap").show("slow"),loadImages("logos")):$("#logo_image_wrap").hide("slow")}function operatorAvatarCssSelect(e){"css"==e?$("#operator_avatar_css_wrap").show("slow"):$("#operator_avatar_css_wrap").show("hide")}function userAvatarCssSelect(e){"css"==e?$("#user_avatar_css_wrap").show("slow"):$("#user_avatar_css_wrap").show("hide")}function loadImages(e){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(console.log(a.responseText),jsonData=JSON.parse(a.responseText),displayImageSelect(e,jsonData))},a.open("POST",applicationPath+"modules/settings/ajax/load_images.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send("type="+e)}function submitChanges(){var e=$(".h-scroll").scrollTop();sessionStorage.setItem("ultimate_support_chat-jsSession--lastClickedPos",e),$("#loading_gif").css("display","block"),$(".content-wrapper").css({opacity:"0.8"}),validNavigation=!0,$("#customizer_form").submit()}function _(e){return document.getElementById(e)}function uploadFile(e){function a(a){var t=a.loaded/a.total*100;_("progressBar_"+e).value=Math.round(t),_("status_"+e).innerHTML=Math.round(t)+"% uploaded... please wait"}function t(a){loadImages(e),_("status_"+e).innerHTML=a.target.responseText,_("progressBar_"+e).style.display="none",_("progressBar_"+e).value=0}function s(a){_("status_"+e).innerHTML="Upload Failed"}function r(a){_("status_"+e).innerHTML="Upload Aborted"}console.log(e);var l,o,i,n=_("file_"+e).files[0];if("backgrounds"==e&&(o=600,i=600),"headers"==e&&(o=600,i=60),"logos"==e&&(o=40,i=40),void 0==n)return _("error_handling_"+e).style.visibility="visible",void(_("error_handling_"+e).innerHTML="Please select a file before clicking the upload button.");if(_("error_handling_"+e).style.visibility="hidden","image/jpeg"!=n.type&&"image/png"!=n.type)_("error_handling_"+e).style.visibility="visible",_("error_handling_"+e).innerHTML="Only JPG, JPEG or PNG file formats are permitted.";else{var d=window.URL||window.webkitURL;l=new Image,l.onload=function(){if(this.width>o||this.height>i)_("error_handling_"+e).style.visibility="visible",_("error_handling_"+e).innerHTML="Please select an image file with maximum "+o+" px by "+i+" px dimensions.";else{document.getElementById("progressBar_"+e).style.display="block";var l=new FormData;l.append("file",n),l.append("type",e);var d=new XMLHttpRequest;d.upload.addEventListener("progress",a,!1),d.addEventListener("load",t,!1),d.addEventListener("error",s,!1),d.addEventListener("abort",r,!1),d.open("POST",applicationPath+"modules/users/ajax/upload_parser.php",!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(l)}},l.src=d.createObjectURL(n)}}function checkOverrideM1(e){if("1"==e&&"img"!=jsThemeConfig.userAvatarSelect){var a=confirm("You have selected a non image based user avatar in the Conversation Layout Design Module.\n\nRequiring users to select an avatar will over-ride that setting.\n\nContinue?");if(a!==!0)return $('[name=requireAvatar][value="0"]').prop("checked",!0),!1;$("<input>").attr({type:"hidden",name:" userAvatarSelect",value:"img"}).appendTo("#customizer_form"),$("<input>").attr({type:"hidden",name:"userAvatarSelectChoice",value:"true"}).appendTo("#customizer_form"),submitChanges()}else if("1"==e&&"img"==jsThemeConfig.userAvatarSelect&&"fixed"==jsThemeConfig.userAvatarSelectChoice){var a=confirm("You have selected a fixed user avatar in the Conversation Layout Design Module.\n\nRequiring users to select an avatar will over-ride that setting.\n\nContinue?");if(a!==!0)return $('[name=requireAvatar][value="0"]').prop("checked",!0),!1;$("<input>").attr({type:"hidden",name:"userAvatarSelectChoice",value:"true"}).appendTo("#customizer_form"),submitChanges()}else submitChanges()}function checkOverrideM2(e){if("img"!=e&&"img"!=jsThemeConfig.userAvatarSelect&&1==jsThemeConfig.requireAvatar){var a=confirm("You have allowed users to select an avatar in the General Widget Design Module.\n\nSwitching to a non image based user avatar will over-ride that setting.\n\nContinue?");if(a!==!0)return $('[name=userAvatarSelect][value="img"]').prop("checked",!0),!1;$("<input>").attr({type:"hidden",name:"requireAvatar",value:0}).appendTo("#customizer_form"),submitChanges()}else if("fixed"==e&&"img"==jsThemeConfig.userAvatarSelect&&1==jsThemeConfig.requireAvatar){var a=confirm("You have allowed users to select an avatar in the General Widget Design Module.\n\nSwitching to a fixed avatar will over-ride that setting.\n\nContinue?");if(a!==!0)return $('[name=userAvatarSelectChoice][value="true"]').prop("checked",!0),!1;$("<input>").attr({type:"hidden",name:"requireAvatar",value:0}).appendTo("#customizer_form"),submitChanges()}else submitChanges()}function restore(){parseInt(sessionStorage.getItem("ultimate_support_chat-jsSession--lastClickedPos"));$(".h-scroll").animate({scrollTop:$(".h-scroll").offset().top+parseInt(sessionStorage.getItem("ultimate_support_chat-jsSession--lastClickedPos")-165)},0)}function showOptions(){return!1}function adminPlayPauseAudio(){adminAudioPlayer.paused?(adminAudioPlayer.play(),$("#admin_play_pause").html('<icon class="play_pause_icon fa fa-pause"></icon>')):(adminAudioPlayer.pause(),$("#admin_play_pause").html('<icon class="play_pause_icon fa fa-play"></icon>'))}function userPlayPauseAudio(){userAudioPlayer.paused?(userAudioPlayer.play(),$("#user_play_pause").html('<icon class="play_pause_icon fa fa-pause"></icon>')):(userAudioPlayer.pause(),$("#user_play_pause").html('<icon class="play_pause_icon fa fa-play"></icon>'))}var nAgt=navigator.userAgent,browser=navigator.appName;-1!=(verOffset=nAgt.indexOf("Opera"))&&(browser="Opera"),-1!=(verOffset=nAgt.indexOf("OPR"))?browser="Opera":-1!=(verOffset=nAgt.indexOf("MSIE"))?browser="Microsoft Internet Explorer":-1!=(verOffset=nAgt.indexOf("Chrome"))?browser="Chrome":-1!=(verOffset=nAgt.indexOf("Safari"))?browser="Safari":-1!=(verOffset=nAgt.indexOf("Firefox"))?browser="Firefox":-1!=nAgt.indexOf("Trident/")?browser="Microsoft Internet Explorer":(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(browser=nAgt.substring(nameOffset,verOffset),browser.toLowerCase()==browser.toUpperCase()&&(browser=navigator.appName));var editModule="",currentTrigger="{/literal}{$smarty.post.triggerMethod}{literal}",editedModule="{/literal}{$smarty.get.e}{literal}";if(""!=editedModule?edit(editedModule):(loadModules(),buildLayout(!0)),"default"==currentTrigger&&checkTrigger("default"),("none"!=jsThemeConfig.adminAvatarSelect||"none"!=jsThemeConfig.userAvatarSelect)&&$("#avatar_radius_wrap").show(),"css"==jsThemeConfig.adminAvatarSelect&&operatorAvatarCssSelect("css"),"css"==jsThemeConfig.userAvatarSelect&&userAvatarCssSelect("css"),2==editModule){var adminAudioPlayer=document.getElementById("admin_audio_player"),selectedAdminAudio=$("#adminMessageAudio").find(":selected").val();adminAudioPlayer.src=dataServer+"audio/"+selectedAdminAudio+".mp3",$("#adminMessageAudio").on("change",function(){selectedAdminAudio=$("#adminMessageAudio").find(":selected").val(),adminAudioPlayer.src=dataServer+"audio/"+selectedAdminAudio+".mp3",adminPlayPauseAudio()}),$("#admin_play_pause").click(function(){adminPlayPauseAudio()}),adminAudioPlayer.addEventListener("ended",function(){adminAudioPlayer.currentTime=0,$("#admin_play_pause").html('<icon class="play_pause_icon fa fa-pause"></icon>')});var userAudioPlayer=document.getElementById("user_audio_player"),selectedUserAudio=$("#userMessageAudio").find(":selected").val();userAudioPlayer.src=dataServer+"audio/"+selectedUserAudio+".mp3",$("#userMessageAudio").on("change",function(){selectedUserAudio=$("#userMessageAudio").find(":selected").val(),userAudioPlayer.src=dataServer+"audio/"+selectedUserAudio+".mp3",userPlayPauseAudio()}),$("#user_play_pause").click(function(){userPlayPauseAudio()}),userAudioPlayer.addEventListener("ended",function(){userAudioPlayer.currentTime=0,$("#user_play_pause").html('<icon class="play_pause_icon fa fa-pause"></icon>')})}

</script>
{/literal}
